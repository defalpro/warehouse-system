<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-warehouse"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º</h1>
            <div class="auth-section">
                <button id="authButton" class="btn btn-auth">
                    <i class="fas fa-sign-in-alt"></i> –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
                </button>
                <div id="userInfo" class="hidden">
                    <span id="userName"></span>
                </div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="add">üì¶ –ü—Ä–∏–µ–º —Ç–æ–≤–∞—Ä–∞</button>
            <button class="tab-btn" data-tab="sell">üí∞ –û—Ç–ø—É—Å–∫ —Ç–æ–≤–∞—Ä–∞</button>
            <button class="tab-btn" data-tab="stock">üìä –û—Å—Ç–∞—Ç–∫–∏</button>
            <button class="tab-btn" data-tab="history">üìã –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</button>
            <button class="tab-btn" data-tab="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>

        <main>
            <!-- –í–∫–ª–∞–¥–∫–∞ –ü—Ä–∏–µ–º–∞ —Ç–æ–≤–∞—Ä–∞ -->
            <div id="add" class="tab-content active">
                <h2><i class="fas fa-plus-circle"></i> –ü—Ä–∏–µ–º —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥</h2>
                <form id="addForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productName">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                            <input type="text" id="productName" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–æ—É—Ç–±—É–∫ Dell XPS 13">
                        </div>
                        <div class="form-group">
                            <label for="productCode">–ê—Ä—Ç–∏–∫—É–ª/–ö–æ–¥ *</label>
                            <input type="text" id="productCode" required placeholder="DEL-XPS13-2023">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select id="category">
                                <option value="–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞">–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</option>
                                <option value="–û—Ñ–∏—Å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞">–û—Ñ–∏—Å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</option>
                                <option value="–ú–µ–±–µ–ª—å">–ú–µ–±–µ–ª—å</option>
                                <option value="–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è">–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è</option>
                                <option value="–ü—Ä–æ—á–µ–µ">–ü—Ä–æ—á–µ–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                            <input type="number" id="quantity" required min="1" value="1">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="price">–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É (—Ä—É–±)</label>
                            <input type="number" id="price" min="0" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label for="supplier">–ü–æ—Å—Ç–∞–≤—â–∏–∫</label>
                            <input type="text" id="supplier" placeholder="–û–û–û '–ü–æ—Å—Ç–∞–≤—â–∏–∫'">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                        <textarea id="notes" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> –ó–∞–ø–∏—Å–∞—Ç—å –Ω–∞ —Å–∫–ª–∞–¥
                    </button>
                </form>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –û—Ç–ø—É—Å–∫–∞ —Ç–æ–≤–∞—Ä–∞ -->
            <div id="sell" class="tab-content">
                <h2><i class="fas fa-cart-arrow-down"></i> –û—Ç–ø—É—Å–∫ —Ç–æ–≤–∞—Ä–∞ –∫–ª–∏–µ–Ω—Ç—É</h2>
                <form id="sellForm">
                    <div class="form-group">
                        <label for="searchProduct">–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞</label>
                        <div class="search-box">
                            <input type="text" id="searchProduct" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –∞—Ä—Ç–∏–∫—É–ª">
                            <button type="button" id="searchBtn" class="btn btn-secondary">
                                <i class="fas fa-search"></i> –ù–∞–π—Ç–∏
                            </button>
                        </div>
                    </div>

                    <div class="search-results hidden" id="searchResults">
                        <h3>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:</h3>
                        <div id="productsList"></div>
                    </div>

                    <div id="selectedProduct" class="hidden">
                        <h3>–í—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä:</h3>
                        <div class="product-card">
                            <div class="product-info">
                                <strong id="selectedName"></strong>
                                <div>–ê—Ä—Ç–∏–∫—É–ª: <span id="selectedCode"></span></div>
                                <div>–í –Ω–∞–ª–∏—á–∏–∏: <span id="selectedStock" class="stock-badge"></span></div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="sellQuantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ—Ç–ø—É—Å–∫–∞ *</label>
                                <input type="number" id="sellQuantity" required min="1" value="1">
                            </div>
                            <div class="form-group">
                                <label for="clientName">–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ *</label>
                                <input type="text" id="clientName" required placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="clientPhone">–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞</label>
                            <input type="tel" id="clientPhone" placeholder="+7 (999) 123-45-67">
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check-circle"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–ø—É—Å–∫
                        </button>
                    </div>
                </form>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –û—Å—Ç–∞—Ç–∫–æ–≤ -->
            <div id="stock" class="tab-content">
                <h2><i class="fas fa-boxes"></i> –¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ</h2>
                
                <div class="controls">
                    <div class="form-group">
                        <input type="text" id="stockSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º..." class="search-input">
                    </div>
                    <button id="refreshStock" class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button id="exportStock" class="btn btn-success">
                        <i class="fas fa-file-excel"></i> –≠–∫—Å–ø–æ—Ä—Ç
                    </button>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalItems">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–∑–∏—Ü–∏–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalQuantity">0</div>
                        <div class="stat-label">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="lowStock">0</div>
                        <div class="stat-label">–ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å</div>
                    </div>
                </div>

                <div class="table-container">
                    <table id="stockTable">
                        <thead>
                            <tr>
                                <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="stockBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ò—Å—Ç–æ—Ä–∏–∏ -->
            <div id="history" class="tab-content">
                <h2><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                
                <div class="filters">
                    <select id="filterType" class="filter-select">
                        <option value="all">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</option>
                        <option value="–ø—Ä–∏—Ö–æ–¥">–ü—Ä–∏—Ö–æ–¥</option>
                        <option value="—Ä–∞—Å—Ö–æ–¥">–†–∞—Å—Ö–æ–¥</option>
                    </select>
                    <input type="date" id="filterDateFrom" class="filter-date">
                    <input type="date" id="filterDateTo" class="filter-date">
                    <button id="applyFilter" class="btn btn-secondary">
                        <i class="fas fa-filter"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="table-container">
                    <table id="historyTable">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–¢–∏–ø</th>
                                <th>–¢–æ–≤–∞—Ä</th>
                                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                <th>–ö–ª–∏–µ–Ω—Ç/–ü–æ—Å—Ç–∞–≤—â–∏–∫</th>
                                <th>–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π</th>
                            </tr>
                        </thead>
                        <tbody id="historyBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ù–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div id="settings" class="tab-content">
                <h2><i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Google Sheets</h2>
                
                <div class="settings-card">
                    <h3><i class="fas fa-table"></i> –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google –¢–∞–±–ª–∏—Ü–∞–º–∏</h3>
                    
                    <div class="form-group">
                        <label for="sheetId">ID Google –¢–∞–±–ª–∏—Ü—ã</label>
                        <input type="text" id="sheetId" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã">
                        <small>ID –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ URL —Ç–∞–±–ª–∏—Ü—ã: https://docs.google.com/spreadsheets/d/–í–ê–®_ID/edit</small>
                    </div>

                    <div class="form-group">
                        <label for="sheetName">–ò–º—è –ª–∏—Å—Ç–∞</label>
                        <input type="text" id="sheetName" value="–°–∫–ª–∞–¥" placeholder="–ò–º—è –ª–∏—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ">
                    </div>

                    <div class="form-buttons">
                        <button id="testConnection" class="btn btn-secondary">
                            <i class="fas fa-plug"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
                        </button>
                        <button id="saveSettings" class="btn btn-primary">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>

                    <div id="connectionStatus" class="status hidden"></div>
                </div>

                <div class="settings-card">
                    <h3><i class="fas fa-file-download"></i> –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                    <p>–°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∫–ª–∞–¥–∞ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–∞ Excel.</p>
                    <button id="backupData" class="btn btn-success">
                        <i class="fas fa-download"></i> –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
                    </button>
                </div>

                <div class="settings-card">
                    <h3><i class="fas fa-info-circle"></i> –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h3>
                    <ol class="instructions">
                        <li>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é Google –¢–∞–±–ª–∏—Ü—É</li>
                        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ—ë ID –∏–∑ URL</li>
                        <li>–í—Å—Ç–∞–≤—å—Ç–µ ID –≤ –ø–æ–ª–µ –≤—ã—à–µ</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"</li>
                        <li>–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞</li>
                    </ol>
                </div>
            </div>
        </main>

        <div id="notification" class="notification hidden"></div>

        <footer>
            <p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º v1.0 | –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Google Sheets</p>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 id="modalTitle"></h3>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script src="sheets-api.js"></script>
    <script src="app.js"></script>
</body>
</html>